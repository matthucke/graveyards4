!!! 5
%html{lang: :en, 'xmlns:og'=>"http://ogp.me/ns#", 'xmlns:fb'=>"http://www.facebook.com/2008/fbml"}
    :ruby
        @page_title ||= "graveyards.com"
        @body_id ||= controller.controller_name + "-" + controller.action_name

    %head
        %meta{:charset => 'utf-8'}
        %meta{:name=>"viewport", :content=>"width=device-width, initial-scale=1.0"}
        %meta{:property=>"fb:app_id", :content=>Rails.application.secrets.facebook['app_id']}

        %link{:rel=>'shortcut icon', :href=>'/images/icon/favicon.png'}

        %title=@page_title

        = stylesheet_link_tag 'application', media: 'all'

        = csrf_meta_tags

        = javascript_include_tag 'application'
        - if @extra_scripts
            - @extra_scripts.each do |s|
                %script{src: s}

        :javascript
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', '#{Rails.application.secrets.google_analytics_id}', 'auto');
            ga('send', 'pageview');
    %body{id: @body_id, data: { spy: "scroll", offset: 0, target: "#navbar-main"} }
        #wrap
            #top-padding
            #fb-root
            = render :partial => 'navbar_main'
            - if @breadcrumbs && !@breadcrumbs.hidden?
                .container
                    %nav#breadcrumbs
                        %span.separator=' > '.html_safe
                        - @breadcrumbs.parents.each do |b|
                            %a{href: b.url }=b.title
                            %span.separator=' > '.html_safe
                        - @breadcrumbs.here.tap do |b|
                            %strong= b.title ? b.title : @page_title
                            %span.separator=': '.html_safe
            %main#main-content
                = yield

        = render :partial => 'footer'

